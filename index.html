<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BFS Nav</title>
  </head>
  <body>
    <h1>Breath-First-Search</h1>
    <div id="controls">
      From
      <select id="fromDest"></select>
      To
      <select id="toDest"></select>
      <button onclick="bfs()">Run</button>
    </div>
    <div id="result"></div>
    <script>
      const graph = {
        Yosmel: ["Oslo", "Bergen", "Otta", "Hamar"],

        // Innlandet / Gudbrandsdalen / Valdres
        Hamar: ["Oslo", "Lillehammer", "Gjøvik"],
        Lillehammer: ["Hamar", "Gjøvik", "Fagernes", "Ringebu", "Oslo"],
        Fagernes: ["Lillehammer", "Beitostølen", "Sogndal"],
        Beitostølen: ["Fagernes"],
        Ringebu: ["Lillehammer", "Otta", "Vinstra"],
        Otta: ["Ringebu", "Lom", "Vågå", "Vinstra"],
        Lom: ["Otta", "Sogndal", "Geiranger"],
        Vågå: ["Otta"],
        Vinstra: ["Otta", "Ringebu"],
        Gjøvik: ["Hamar", "Lillehammer", "Raufoss"],
        Raufoss: ["Gjøvik"],
        Sogndal: ["Fagernes", "Lom", "Flåm"],

        // Oslo og omegn
        Oslo: ["Hamar", "Lillehammer", "Drammen", "Lillestrøm", "Sandvika", "Gardermoen", "Ålesund", "Bergen"],
        Drammen: ["Oslo", "Kongsberg", "Hokksund"],
        Kongsberg: ["Drammen", "Notodden"],
        Notodden: ["Kongsberg"],
        Hokksund: ["Drammen"],
        Lillestrøm: ["Oslo", "Jessheim", "Gardermoen"],
        Jessheim: ["Lillestrøm"],
        Gardermoen: ["Oslo", "Lillestrøm"],
        Sandvika: ["Oslo"],

        // Vestlandet – Bergensbanen og fjorder nå gjensidig
        Bergen: ["Oslo", "Voss", "Stavanger", "Flåm"],
        Voss: ["Bergen", "Flåm", "Myrdal"],
        Myrdal: ["Voss", "Flåm"],
        Flåm: ["Bergen", "Voss", "Myrdal", "Sogndal", "Gudvangen", "Aurland"],
        Gudvangen: ["Flåm"],
        Aurland: ["Flåm"],

        // Sørvestlandet
        Stavanger: ["Bergen", "Sandnes", "Kristiansand", "Haugesund"],
        Sandnes: ["Stavanger"],
        Kristiansand: ["Stavanger"],
        Haugesund: ["Stavanger", "Odda"],
        Odda: ["Haugesund", "Trolltunga"],
        Trolltunga: ["Odda"],

        // Nordvest / Ålesund-området
        Ålesund: ["Oslo", "Geiranger", "Molde", "Åndalsnes"],
        Geiranger: ["Ålesund", "Lom", "Valldal", "Trollstigen"],
        Valldal: ["Geiranger"],
        Åndalsnes: ["Ålesund", "Trollstigen", "Molde"],
        Trollstigen: ["Geiranger", "Åndalsnes"],
        Molde: ["Ålesund", "Åndalsnes"],
      };

      const sortedNodes = Object.keys(graph).sort();
      const fromInput = document.getElementById("fromDest");
      const toInput = document.getElementById("toDest");
      const result = document.getElementById("result");

      sortedNodes.forEach((nodeName) => {
        fromInput.appendChild(new Option(nodeName, nodeName));
        toInput.appendChild(new Option(nodeName, nodeName));
      });

      fromInput.value = "";
      toInput.value = "";

      function bfs() {
        const startNode = fromInput.value;
        const targetNode = toInput.value;

        const visited = new Set(); // We are going to track the nodes we have visited
        const queue = [startNode]; // We the search from the startingNode
        const parentMap = { [startNode]: null }; // We are going to keep track of the parent that led to the current node in order to construct a path

        // Loop for as long as there are items in the queue to visit
        while (queue.length > 0) {
          const currentNode = queue.shift();

          if (visited.has(currentNode)) continue; // Skip this iteration and go to the next if we have already been through this node
          visited.add(currentNode); // otherwise add it to visited

          // Now that we declared this is an unvisisted node, lets explore the neighbours of the current node
          graph[currentNode].forEach((neighbor) => {
            // If we havent visited this neighbor yet, add it to the queue
            if (!visited.has(neighbor)) {
              queue.push(neighbor);
              parentMap[neighbor] = currentNode;
            }

            if (neighbor === targetNode) {
              const path = [];
              let current = targetNode;

              while (current) {
                path.unshift(current);
                current = parentMap[current];
              }

              result.innerHTML = `
              <div>Shortest path in <strong>${path.length - 1}</strong> steps:</div>
              <div class="path">${path.join(" → ")}</div>
            `;
              return;
            }
          });
        }
        // result.innerHTML = "No path found";
      }

      function renderResult(path) {}
    </script>
  </body>
</html>
